<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Typing REST Endpoints · Rest Hooks</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="In REST design, many operations can be performed on a given type of data."/><meta name="docsearch:version" content="5.0"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Typing REST Endpoints · Rest Hooks"/><meta property="og:type" content="website"/><meta property="og:url" content="https://resthooks.io/"/><meta property="og:description" content="In REST design, many operations can be performed on a given type of data."/><meta property="og:image" content="https://resthooks.io/img/rest_hooks_logo.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://resthooks.io/img/rest_hooks_logo.png"/><link rel="shortcut icon" href="/img/favicon/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://resthooks.io/blog/atom.xml" title="Rest Hooks Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://resthooks.io/blog/feed.xml" title="Rest Hooks Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-138752992-1', 'auto');
              ga('send', 'pageview');
            </script><link rel="preload" href="/font/Graphik-Regular-Web.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/font/Graphik-RegularItalic-Web.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/font/Graphik-Semibold-Web.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/font/Graphik-SemiboldItalic-Web.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><script type="text/javascript" src="/scripts/sidebarScroll.js"></script><script type="text/javascript" src="/scripts/codeblock.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/prism.css"/><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/rest_hooks_logo.svg" alt="Rest Hooks"/><h2 class="headerTitleWithLogo">Rest Hooks</h2></a><a href="/versions"><h3>5.0</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/getting-started/installation" target="_self">Getting Started</a></li><li class="siteNavGroupActive"><a href="/docs/api/README" target="_self">API</a></li><li class="siteNavGroupActive"><a href="/docs/guides/resource-types" target="_self">Resource Definitions</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><li class=""><a href="https://www.github.com/coinbase/rest-hooks" target="_self">Github</a></li><li class=""><a href="https://github.com/Rest-Hooks/todo-example" target="_blank">🎮 Demo</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Network Interface</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Getting Started<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/getting-started/introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/endpoint">Endpoint</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/data-dependency">Data Dependencies</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/schema">Schema</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">REST / CRUD<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/guides/resource-types">Resource types</a></li><li class="navListItem"><a class="navItem" href="/docs/rest/usage">Usage</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Network Interface</h4><ul><li class="navListItem"><a class="navItem" href="/docs/guides/url">URL Patterns</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/extending-endpoints">Custom endpoints</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/guides/rest-types">Typing REST Endpoints</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/pagination">Pagination</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/auth">Authentication</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/network-transform">Transforming data on fetch</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/mocking-unfinished">Mocking unfinished endpoints</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Entity Interface</h4><ul><li class="navListItem"><a class="navItem" href="/docs/guides/computed-properties">Computed Properties</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/multi-pk">Multi-column primary key</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Performance Optimizations</h4><ul><li class="navListItem"><a class="navItem" href="/docs/guides/nested-response">Nesting related resources (server-side join)</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/rpc">Capturing Mutation Side-Effects</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Concepts<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/concepts/loading-state">Handling loading state</a></li><li class="navListItem"><a class="navItem" href="/docs/concepts/network-errors">Dealing with network errors</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Advanced<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Resource Definitions</h4><ul><li class="navListItem"><a class="navItem" href="/docs/guides/custom-networking">Custom networking library</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/resource-lifetime">Custom cache lifetime</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/binary-fetches">Fetching Media</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Components</h4><ul><li class="navListItem"><a class="navItem" href="/docs/guides/infinite-scrolling-pagination">Infinite Scrolling</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Testing</h4><ul><li class="navListItem"><a class="navItem" href="/docs/guides/debugging">Debugging</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/storybook">Mocking data for Storybook</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/unit-testing-hooks">Unit testing hooks</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/unit-testing-components">Unit testing components</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Performance</h4><ul><li class="navListItem"><a class="navItem" href="/docs/guides/fetch-multiple">Fetching multiple resources at once</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/render-as-you-fetch">Render as you Fetch</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/immediate-updates">Immediate Mutation Updates</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/optimistic-updates">Optimistic Updates</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/abort">Aborting Fetch</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Integrations</h4><ul><li class="navListItem"><a class="navItem" href="/docs/guides/redux">Redux integration</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Legacy</h4><ul><li class="navListItem"><a class="navItem" href="/docs/guides/class-components">Usage with class components</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/no-suspense">Usage without Suspense</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/legacy-browser">Legacy browser support</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">API<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/api/README">API Reference</a></li><li class="navListItem"><a class="navItem" href="/docs/api/types">Types</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Core Hooks</h4><ul><li class="navListItem"><a class="navItem" href="/docs/api/useresource">useResource()</a></li><li class="navListItem"><a class="navItem" href="/docs/api/useFetcher">useFetcher()</a></li><li class="navListItem"><a class="navItem" href="/docs/api/useCache">useCache()</a></li><li class="navListItem"><a class="navItem" href="/docs/api/useSubscription">useSubscription()</a></li><li class="navListItem"><a class="navItem" href="/docs/api/useRetrieve">useRetrieve()</a></li><li class="navListItem"><a class="navItem" href="/docs/api/useInvalidator">useInvalidator()</a></li><li class="navListItem"><a class="navItem" href="/docs/api/useResetter">useResetter()</a></li><li class="navListItem"><a class="navItem" href="/docs/api/useMeta">useMeta()</a></li><li class="navListItem"><a class="navItem" href="/docs/api/useError">useError()</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Extra Hooks</h4><ul><li class="navListItem"><a class="navItem" href="/docs/api/useDebounce">useDebounce()</a></li><li class="navListItem"><a class="navItem" href="/docs/api/useCancelling">useCancelling()</a></li><li class="navListItem"><a class="navItem" href="/docs/api/useLoading">useLoading()</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Interface Definitions</h4><ul><li class="navListItem"><a class="navItem" href="/docs/api/Endpoint">Endpoint</a></li><li class="navListItem"><a class="navItem" href="/docs/api/resource">Resource</a></li><li class="navListItem"><a class="navItem" href="/docs/api/Index">Index</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Schemas</h4><ul><li class="navListItem"><a class="navItem" href="/docs/api/schema">Quick Start</a></li><li class="navListItem"><a class="navItem" href="/docs/api/Entity">Entity</a></li><li class="navListItem"><a class="navItem" href="/docs/api/SimpleRecord">SimpleRecord</a></li><li class="navListItem"><a class="navItem" href="/docs/api/Object">Object</a></li><li class="navListItem"><a class="navItem" href="/docs/api/Array">Array</a></li><li class="navListItem"><a class="navItem" href="/docs/api/Union">Union</a></li><li class="navListItem"><a class="navItem" href="/docs/api/Values">Values</a></li><li class="navListItem"><a class="navItem" href="/docs/api/Delete">Delete</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Components</h4><ul><li class="navListItem"><a class="navItem" href="/docs/api/CacheProvider">&lt;CacheProvider /&gt;</a></li><li class="navListItem"><a class="navItem" href="/docs/api/ExternalCacheProvider">&lt;ExternalCacheProvider /&gt;</a></li><li class="navListItem"><a class="navItem" href="/docs/api/NetworkErrorBoundary">&lt;NetworkErrorBoundary /&gt;</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Managers</h4><ul><li class="navListItem"><a class="navItem" href="/docs/api/Manager">Manager</a></li><li class="navListItem"><a class="navItem" href="/docs/api/NetworkManager">NetworkManager</a></li><li class="navListItem"><a class="navItem" href="/docs/api/SubscriptionManager">SubscriptionManager</a></li><li class="navListItem"><a class="navItem" href="/docs/api/PollingSubscription">PollingSubscription</a></li><li class="navListItem"><a class="navItem" href="/docs/api/DevToolsManager">DevToolsManager</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Testing</h4><ul><li class="navListItem"><a class="navItem" href="/docs/api/MockResolver">&lt;MockResolver /&gt;</a></li><li class="navListItem"><a class="navItem" href="/docs/api/makeRenderRestHook">makeRenderRestHook()</a></li><li class="navListItem"><a class="navItem" href="/docs/api/makeCacheProvider">makeCacheProvider()</a></li><li class="navListItem"><a class="navItem" href="/docs/api/makeExternalCacheProvider">makeExternalCacheProvider()</a></li><li class="navListItem"><a class="navItem" href="/docs/api/mockInitialState">mockInitialState()</a></li><li class="navListItem"><a class="navItem" href="/docs/api/MockProvider">&lt;MockProvider /&gt;</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Upgrade Guide<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/upgrade/upgrading-to-5">Upgrading from 4 to 5</a></li><li class="navListItem"><a class="navItem" href="/docs/upgrade/upgrading-test-to-three">Upgrading @rest-hooks/test to 3</a></li><li class="navListItem"><a class="navItem" href="/docs/upgrade/upgrading-test-to-four">Upgrading @rest-hooks/test to 4</a></li><li class="navListItem"><a class="navItem" href="/docs/upgrade/upgrading-test-to-six">Upgrading @rest-hooks/test to 6</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/coinbase/rest-hooks/edit/master/docs/guides/rest-types.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Typing REST Endpoints</h1></header><article><div><span><p>In REST design, many operations can be performed on a given type of data.</p>
<p>Attaching these operations to the type via static methods allows</p>
<ul>
<li>A singular import for both class usage, typing, and endpoints</li>
<li>Reducing code duplication by extracting common patterns into base classes</li>
</ul>
<p><a href="../api/Resource">Resource</a> provides one such pattern, which makes getting started
fast. However, even if the pattern generally matches your API design, there
are often special operations or one-off cases where additional endpoints must
be extended or added.</p>
<h2><a class="anchor" aria-hidden="true" id="tldr"></a><a href="#tldr" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TL;DR</h2>
<h3><a class="anchor" aria-hidden="true" id="restendpoint"></a><a href="#restendpoint" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>RestEndpoint</h3>
<p><a href="../api/types#restendpoint">RestEndpoint</a> type is provided to conveniently declare
<a href="../api/Resource">Resource</a> <a href="../api/Endpoint">Endpoint</a>s.</p>
<pre><code class="hljs css language-typescript">RestEndpoint<span class="token operator">&lt;</span>
  <span class="token constant">F</span> <span class="token keyword">extends</span> <span class="token class-name">FetchFunction</span> <span class="token operator">=</span> RestFetch<span class="token punctuation">,</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token class-name">Schema</span> <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">=</span> Schema <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  <span class="token constant">M</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token boolean">true</span></span> <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token operator">|</span> <span class="token keyword">undefined</span>
<span class="token operator">></span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="usage"></a><a href="#usage" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Usage</h3>
<p>Here's an example of each endpoint's return typed followed by usage. For
a full explanation, continue reading below.</p>
<pre><code class="hljs css language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> Resource<span class="token punctuation">,</span> RestEndpoint<span class="token punctuation">,</span> RestFetch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@rest-hooks/rest'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyResource</span> <span class="token keyword">extends</span> <span class="token class-name">Resource</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token generic-function"><span class="token function">list</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">typeof</span> Resource<span class="token operator">></span></span></span><span class="token punctuation">(</span>
    <span class="token keyword">this</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token operator">:</span> RestEndpoint<span class="token operator">&lt;</span>RestFetch<span class="token punctuation">,</span> SchemaList<span class="token operator">&lt;</span>AbstractInstanceType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">>></span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token generic-function"><span class="token function">create</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">typeof</span> Resource<span class="token operator">></span></span></span><span class="token punctuation">(</span>
    <span class="token keyword">this</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token operator">:</span> RestEndpoint<span class="token operator">&lt;</span>
    RestFetch<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> Partial<span class="token operator">&lt;</span>AbstractInstanceType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">>>></span><span class="token punctuation">,</span>
    SchemaDetail<span class="token operator">&lt;</span>AbstractInstanceType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">>></span><span class="token punctuation">,</span>
    <span class="token boolean">true</span>
  <span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token generic-function"><span class="token function">filteredAndPaginatedList</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">typeof</span> Resource<span class="token operator">></span></span></span><span class="token punctuation">(</span>
    <span class="token keyword">this</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token operator">:</span> RestEndpoint<span class="token operator">&lt;</span>
    RestFetch<span class="token operator">&lt;</span><span class="token punctuation">{</span> filterA<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span> sortby<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> results<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> nextPage<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">undefined</span>
  <span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span> schema<span class="token operator">:</span> <span class="token punctuation">{</span> results<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nextPage<span class="token operator">:</span> <span class="token string">''</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<pre><code class="hljs css language-typescript"><span class="token keyword">import</span> MyResource <span class="token keyword">from</span> <span class="token string">'resources/MyResource'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useResource <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rest-hooks'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> items <span class="token operator">=</span> <span class="token function">useResource</span><span class="token punctuation">(</span>MyResource<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> createMy <span class="token operator">=</span> <span class="token function">useFetcher</span><span class="token punctuation">(</span>MyResource<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> results<span class="token punctuation">,</span> nextPage <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useResource</span><span class="token punctuation">(</span>
  MyResource<span class="token punctuation">.</span><span class="token function">filteredAndPaginatedList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> filterA<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> sortby<span class="token operator">:</span> <span class="token string">'first'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="problem"></a><a href="#problem" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Problem</h2>
<p>To reduce code bloat, make development faster, reducing maintenance costs and reduce errors it is recommended
to share common patterns in parent classes, and only specify what is specific to a given
resource in that resource's class. Oftentimes this looks like simply its expected members
and a pk() definition (though if you use a common field for pk() - you can also pull that up).</p>
<p><a href="../api/Resource">Resource</a> is an example attempt that is useful for many common REST patterns that
can be further extended and easily customized like so:</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-303-tab-304" class="nav-link active" data-group="group_303" data-tab="tab-group-303-content-304">Bloat</div><div id="tab-group-303-tab-305" class="nav-link" data-group="group_303" data-tab="tab-group-303-content-305">Gets reduced to</div></div><div class="tab-content"><div id="tab-group-303-content-304" class="tab-pane active" data-group="group_303" tabindex="-1"><div><span><pre><code class="hljs css language-typescript"><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span><br />  <span class="token keyword">readonly</span> id<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br />  <span class="token keyword">readonly</span> username<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br />  <span class="token keyword">readonly</span> createdAt<span class="token operator">:</span> Date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br />  <span class="token function">pk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">;</span><br />  <span class="token punctuation">}</span><br /><br />  <span class="token keyword">static</span> schema <span class="token operator">=</span> <span class="token punctuation">{</span><br />    createdAt<span class="token operator">:</span> Date<span class="token punctuation">,</span><br />  <span class="token punctuation">}</span><span class="token punctuation">;</span><br /><br />  <span class="token keyword">static</span> <span class="token function">detail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Endpoint</span><span class="token punctuation">(</span><br />      <span class="token punctuation">(</span><span class="token punctuation">{</span> id <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/user/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br />      <span class="token punctuation">{</span> schema<span class="token operator">:</span> User <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    <span class="token punctuation">)</span><span class="token punctuation">;</span><br />  <span class="token punctuation">}</span><br /><br />  <span class="token keyword">static</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Endpoint</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/user</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><br />      schema<span class="token operator">:</span> <span class="token punctuation">[</span>User<span class="token punctuation">]</span><span class="token punctuation">,</span><br />    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />  <span class="token punctuation">}</span><br /><br />  <span class="token comment">// ...even more endpoints for this Resource defined below</span><br /><span class="token punctuation">}</span><br /><br /><span class="token keyword">class</span> <span class="token class-name">Post</span> <span class="token keyword">extends</span> <span class="token class-name">Resource</span> <span class="token punctuation">{</span><br />  <span class="token keyword">readonly</span> id<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br />  <span class="token keyword">readonly</span> title<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br />  <span class="token keyword">readonly</span> content<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br /><br />  <span class="token function">pk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">;</span><br />  <span class="token punctuation">}</span><br /><br />  <span class="token keyword">static</span> <span class="token function">detail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Endpoint</span><span class="token punctuation">(</span><br />      <span class="token punctuation">(</span><span class="token punctuation">{</span> id <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/post/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br />      <span class="token punctuation">{</span> schema<span class="token operator">:</span> Post <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    <span class="token punctuation">)</span><span class="token punctuation">;</span><br />  <span class="token punctuation">}</span><br /><br />  <span class="token keyword">static</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Endpoint</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/post</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><br />      schema<span class="token operator">:</span> <span class="token punctuation">[</span>Post<span class="token punctuation">]</span><span class="token punctuation">,</span><br />    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />  <span class="token punctuation">}</span><br /><br />  <span class="token comment">// ...even more endpoints for this Resource defined below</span><br /><span class="token punctuation">}</span><br /></code></pre>
</span></div></div><div id="tab-group-303-content-305" class="tab-pane" data-group="group_303" tabindex="-1"><div><span><pre><code class="hljs css language-typescript"><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Resource</span> <span class="token punctuation">{</span><br />  <span class="token keyword">readonly</span> id<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br />  <span class="token keyword">readonly</span> username<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br />  <span class="token keyword">readonly</span> createdAt<span class="token operator">:</span> Date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br />  <span class="token function">pk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">;</span><br />  <span class="token punctuation">}</span><br /><br />  <span class="token keyword">static</span> schema <span class="token operator">=</span> <span class="token punctuation">{</span><br />    createdAt<span class="token operator">:</span> Date<span class="token punctuation">,</span><br />  <span class="token punctuation">}</span><span class="token punctuation">;</span><br /><br />  <span class="token keyword">static</span> urlRoot <span class="token operator">=</span> <span class="token string">'/user'</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /><br /><span class="token keyword">class</span> <span class="token class-name">Post</span> <span class="token keyword">extends</span> <span class="token class-name">Resource</span> <span class="token punctuation">{</span><br />  <span class="token keyword">readonly</span> id<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br />  <span class="token keyword">readonly</span> title<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br />  <span class="token keyword">readonly</span> content<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br /><br />  <span class="token function">pk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">;</span><br />  <span class="token punctuation">}</span><br /><br />  <span class="token keyword">static</span> urlRoot <span class="token operator">=</span> <span class="token string">'/post'</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /></code></pre>
</span></div></div></div></div>
<p>Even in this overly simplistic case we're more than halving the lines of code.
Once the complexities of the real world kick in, this improvement expands.</p>
<p>However, we now have a problem. Before we were explictily specifying the <a href="../api/Endpoint">Endpoint</a>s'
expected shape via the <a href="../api/schema">schema</a>. Now it if we use the common methods like .detail()
we lose our typing information.</p>
<h2><a class="anchor" aria-hidden="true" id="generics-static-methods-and-this"></a><a href="#generics-static-methods-and-this" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Generics, static methods, and this</h2>
<p>To explain the solution - generic <code>this</code> - let's simplify the example.</p>
<p>Here we'll define a static method that returns the type of the class - <code>Base</code>.</p>
<pre><code class="hljs css language-typescript"><span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Base <span class="token punctuation">{</span>
    <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token keyword">this</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span>extra <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>If we inspect the runtime value, it says the type is <code>Base</code>.</p>
<pre><code class="hljs css language-typescript"><span class="token comment">// type is Base</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> Base<span class="token punctuation">.</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// print Base</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Now we extend that class</p>
<pre><code class="hljs css language-typescript"><span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
  another <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>And call the same static method</p>
<pre><code class="hljs css language-typescript"><span class="token comment">// type is Base</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> Child<span class="token punctuation">.</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// print Child</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>TypeScript will implicitly type <code>obj</code> as <code>Base</code>, but at runtime, we can see it's really <code>Child</code></p>
<h2><a class="anchor" aria-hidden="true" id="solution-generics"></a><a href="#solution-generics" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Solution: generics</h2>
<p>Generics in TypeScript can be attached to parameters in any function and automatically inferred.
Since <code>this</code> is implicit, TypeScript allows you to explictly bind <code>this</code> if you want a method's
return type based on it:</p>
<pre><code class="hljs css language-typescript"><span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token generic-function"><span class="token function">factory</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> Base<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token keyword">this</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span>extra <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<pre><code class="hljs css language-typescript"><span class="token comment">// type is Child</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> Child<span class="token punctuation">.</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// print Child</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Now when we call the method defined in <code>Base</code> on any descendant, it is typed appropriately!</p>
<h2><a class="anchor" aria-hidden="true" id="a-limitation"></a><a href="#a-limitation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>A limitation</h2>
<p>While generic <code>this</code> is powerful in allowing correct typing even for inherited classes, it
has one annoying bug: <code>super</code> calls incorrectly resolve to the constraint, rather than the generic.</p>
<pre><code class="hljs css language-typescript"><span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
  extra<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token keyword">static</span> <span class="token generic-function"><span class="token function">factory</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> Base<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span>extra <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token comment">// @ts-expect-error - typescript says obj is not compatible with T</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="workaround"></a><a href="#workaround" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Workaround</h3>
<p><code>any</code> is mostly to be avoided, but since we are careful to type our return
type correctly in the method, we can be confident the rest of our code will
still be protected.</p>
<pre><code class="hljs css language-typescript"><span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
  extra<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token keyword">static</span> <span class="token generic-function"><span class="token function">factory</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> Base<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span>extra <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> obj <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>This is only needed if we are setting the type directly from the super call.
We'll see below we only need to do this when we retain the schema from the super call.
This is also not necessary if <code>this.method()</code> is called as this bug <em>only</em> affects <code>super</code></p>
<h2><a class="anchor" aria-hidden="true" id="as-resource"></a><a href="#as-resource" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>As Resource</h2>
<p>Applying this to our original example, we get something along the lines of:</p>
<pre><code class="hljs css language-typescript"><span class="token keyword">class</span> <span class="token class-name">Resource</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token generic-function"><span class="token function">detail</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">typeof</span> Resource<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Endpoint</span><span class="token punctuation">(</span>
      props <span class="token operator">=></span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> schema<span class="token operator">:</span> <span class="token keyword">this</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token generic-function"><span class="token function">list</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">typeof</span> Resource<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Endpoint</span><span class="token punctuation">(</span>
      props <span class="token operator">=></span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">listUrl</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> schema<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="extending-and-adding-endpoints"></a><a href="#extending-and-adding-endpoints" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Extending and adding endpoints</h2>
<p>This means any time we define our own <a href="./extending-endpoints">custom endpoints</a> we should
be sure to include generics so the types are alwalys correct.</p>
<p>For instance, we can change the expected response of the API to have the resource
inside the 'data' attribute:</p>
<pre><code class="hljs css language-typescript"><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Resource</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token generic-function"><span class="token function">detail</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">typeof</span> Resource<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">detail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span> schema<span class="token operator">:</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> <span class="token keyword">this</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>If we were to explicitly type thing, we could use <code>RestEndpoint</code></p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-306-tab-307" class="nav-link active" data-group="group_306" data-tab="tab-group-306-content-307">Schema</div><div id="tab-group-306-tab-308" class="nav-link" data-group="group_306" data-tab="tab-group-306-content-308">Parameters</div><div id="tab-group-306-tab-309" class="nav-link" data-group="group_306" data-tab="tab-group-306-content-309">Mutate</div><div id="tab-group-306-tab-310" class="nav-link" data-group="group_306" data-tab="tab-group-306-content-310">Payload/Body</div></div><div class="tab-content"><div id="tab-group-306-content-307" class="tab-pane active" data-group="group_306" tabindex="-1"><div><span><pre><code class="hljs css language-typescript"><span class="token comment">// typeof result is { data: User }</span><br /><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">useResource</span><span class="token punctuation">(</span>User<span class="token punctuation">.</span><span class="token function">detail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /></code></pre>
<pre><code class="hljs css language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> RestEndpoint<span class="token punctuation">,</span> RestFetch<span class="token punctuation">,</span> Resource <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@rest-hooks/rest'</span><span class="token punctuation">;</span><br /><br /><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Resource</span> <span class="token punctuation">{</span><br />  <span class="token keyword">static</span> <span class="token generic-function"><span class="token function">detail</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">typeof</span> Resource<span class="token operator">></span></span></span><span class="token punctuation">(</span><br />    <span class="token keyword">this</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span><br />  <span class="token punctuation">)</span><span class="token operator">:</span> RestEndpoint<span class="token operator">&lt;</span>RestFetch<span class="token punctuation">,</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token operator">></span> <span class="token punctuation">{</span><br />    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">detail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span> schema<span class="token operator">:</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> <span class="token keyword">this</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />  <span class="token punctuation">}</span><br /><span class="token punctuation">}</span><br /><br /><span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useResource</span><span class="token punctuation">(</span>User<span class="token punctuation">.</span><span class="token function">detail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'5'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /></code></pre>
</span></div></div><div id="tab-group-306-content-308" class="tab-pane" data-group="group_306" tabindex="-1"><div><span><pre><code class="hljs css language-typescript"><span class="token comment">// typeof id is string</span><br /><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">useResource</span><span class="token punctuation">(</span>User<span class="token punctuation">.</span><span class="token function">detail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /></code></pre>
<pre><code class="hljs css language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> RestEndpoint<span class="token punctuation">,</span> RestFetch<span class="token punctuation">,</span> Resource <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@rest-hooks/rest'</span><span class="token punctuation">;</span><br /><br /><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Resource</span> <span class="token punctuation">{</span><br />  <span class="token keyword">static</span> <span class="token generic-function"><span class="token function">detail</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">typeof</span> Resource<span class="token operator">></span></span></span><span class="token punctuation">(</span><br />    <span class="token keyword">this</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span><br />  <span class="token punctuation">)</span><span class="token operator">:</span> RestEndpoint<span class="token operator">&lt;</span><br />    RestFetch<span class="token operator">&lt;</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">,</span><br />    SchemaDetail<span class="token operator">&lt;</span>AbstractInstanceType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">>></span><span class="token punctuation">,</span><br />    <span class="token keyword">undefined</span><br />  <span class="token operator">></span> <span class="token punctuation">{</span><br />    <span class="token comment">// super.detail() resolves the Schema to be based on `typeof Resource`, rather than `T`</span><br />    <span class="token comment">// which makes it incompatible with the return type correctly specified.</span><br />    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">detail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">;</span><br />  <span class="token punctuation">}</span><br /><span class="token punctuation">}</span><br /><br /><span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useResource</span><span class="token punctuation">(</span>User<span class="token punctuation">.</span><span class="token function">detail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'5'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /></code></pre>
</span></div></div><div id="tab-group-306-content-309" class="tab-pane" data-group="group_306" tabindex="-1"><div><span><pre><code class="hljs css language-typescript"><span class="token comment">// works</span><br /><span class="token keyword">const</span> updateUser <span class="token operator">=</span> <span class="token function">useFetcher</span><span class="token punctuation">(</span>User<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token comment">// typeerror - protected against mutable operations</span><br /><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token function">useResource</span><span class="token punctuation">(</span>User<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /></code></pre>
<pre><code class="hljs css language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> RestEndpoint<span class="token punctuation">,</span> RestFetch<span class="token punctuation">,</span> Resource <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@rest-hooks/rest'</span><span class="token punctuation">;</span><br /><br /><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Resource</span> <span class="token punctuation">{</span><br />  <span class="token keyword">static</span> <span class="token generic-function"><span class="token function">update</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">typeof</span> Resource<span class="token operator">></span></span></span><span class="token punctuation">(</span><br />    <span class="token keyword">this</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span><br />  <span class="token punctuation">)</span><span class="token operator">:</span> RestEndpoint<span class="token operator">&lt;</span>RestFetch<span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token operator">></span> <span class="token punctuation">{</span><br />    <span class="token comment">// super.update() resolves the Schema to be based on `typeof Resource`, rather than `T`</span><br />    <span class="token comment">// which makes it incompatible with the return type correctly specified.</span><br />    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">;</span><br />  <span class="token punctuation">}</span><br /><span class="token punctuation">}</span><br /><br /><span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useResource</span><span class="token punctuation">(</span>User<span class="token punctuation">.</span><span class="token function">detail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'5'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /></code></pre>
</span></div></div><div id="tab-group-306-content-310" class="tab-pane" data-group="group_306" tabindex="-1"><div><span><pre><code class="hljs css language-typescript"><span class="token keyword">const</span> updateUser <span class="token operator">=</span> <span class="token function">useFetcher</span><span class="token punctuation">(</span>User<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br /><span class="token keyword">const</span> handleClick <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />  <span class="token comment">// works</span><br />  <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> username<span class="token operator">:</span> <span class="token string">'bob'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />  <span class="token comment">// typeerror</span><br />  <span class="token keyword">const</span> failed <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> username<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />  <span class="token comment">// typeerror</span><br />  <span class="token keyword">const</span> failed <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> usernme<span class="token operator">:</span> <span class="token string">'bob'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>updateUser<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /></code></pre>
<pre><code class="hljs css language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> RestEndpoint<span class="token punctuation">,</span> RestFetch<span class="token punctuation">,</span> Resource <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@rest-hooks/rest'</span><span class="token punctuation">;</span><br /><br /><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Resource</span> <span class="token punctuation">{</span><br />  <span class="token keyword">static</span> <span class="token generic-function"><span class="token function">update</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">typeof</span> Resource<span class="token operator">></span></span></span><span class="token punctuation">(</span><br />    <span class="token keyword">this</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span><br />  <span class="token punctuation">)</span><span class="token operator">:</span> RestEndpoint<span class="token operator">&lt;</span>RestFetch<span class="token operator">&lt;</span>object<span class="token punctuation">,</span> <span class="token punctuation">{</span> username<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token operator">></span> <span class="token punctuation">{</span><br />    <span class="token comment">// super.update() resolves the Schema to be based on `typeof Resource`, rather than `T`</span><br />    <span class="token comment">// which makes it incompatible with the return type correctly specified.</span><br />    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">;</span><br />  <span class="token punctuation">}</span><br /><span class="token punctuation">}</span><br /><br /><span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useResource</span><span class="token punctuation">(</span>User<span class="token punctuation">.</span><span class="token function">detail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'5'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /></code></pre>
</span></div></div></div></div>
<h2><a class="anchor" aria-hidden="true" id="typing-rules-of-thumb"></a><a href="#typing-rules-of-thumb" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Typing rules of thumb</h2>
<p>Generally you want to type return values as specific as possible, but accept
function arguments as loose as possible (like in hooks). To follow this principal:</p>
<ul>
<li><a href="../api/types#restendpoint">RestEndpoint</a> for endpoints in <a href="../api/Resource">Resource</a>s</li>
<li><a href="../api/types#endpointinstance">EndpointInstance</a> for anything that uses the <a href="../api/Endpoint">Endpoint</a> class.</li>
<li><a href="../api/types#endpointinterface">EndpointInterface</a> for any hook arguments</li>
</ul>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/guides/extending-endpoints"><span class="arrow-prev">← </span><span>Custom endpoints</span></a><a class="docs-next button" href="/docs/guides/pagination"><span>Pagination</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#tldr">TL;DR</a><ul class="toc-headings"><li><a href="#restendpoint">RestEndpoint</a></li><li><a href="#usage">Usage</a></li></ul></li><li><a href="#problem">Problem</a></li><li><a href="#generics-static-methods-and-this">Generics, static methods, and this</a></li><li><a href="#solution-generics">Solution: generics</a></li><li><a href="#a-limitation">A limitation</a><ul class="toc-headings"><li><a href="#workaround">Workaround</a></li></ul></li><li><a href="#as-resource">As Resource</a></li><li><a href="#extending-and-adding-endpoints">Extending and adding endpoints</a></li><li><a href="#typing-rules-of-thumb">Typing rules of thumb</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/rest_hooks_logo.svg" alt="Rest Hooks" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/getting-started/installation">Getting Started</a><a href="/docs/guides/resource-types">Resource Definitions</a><a href="/docs/api/README">API Reference</a></div><div><h5>Community</h5><a href="/users.html">User Showcase</a><a href="http://stackoverflow.com/questions/tagged/rest-hooks" target="_blank" rel="noreferrer noopener">Stack Overflow</a></div><div><h5>More</h5><a href="https://github.com/coinbase/rest-hooks">GitHub</a><a class="github-button" href="https://github.com/coinbase/rest-hooks" data-icon="octicon-star" data-count-href="/coinbase/rest-hooks/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a><a href="https://discord.gg/35nb8Mz"><img src="https://img.shields.io/discord/768254430381735967.svg?style=flat-square&amp;colorB=758ED3" alt="Chat"/></a></div></section><section class="copyright">Copyright © 2021 Coinbase<br/>Some icons copyright Font Awesome and Noun Project (Hassan ali, ProSymbols)</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '52e661c10738fd114bcf68d537358c16',
                indexName: 'coinbase-rest-hooks',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["version:5.0"]}
              });
            </script></body></html>