<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Transforming data on fetch ¬∑ Rest Hooks</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="All network requests flow through the `fetch()` method, so any transforms needed can simply"/><meta name="docsearch:version" content="4.0"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Transforming data on fetch ¬∑ Rest Hooks"/><meta property="og:type" content="website"/><meta property="og:url" content="https://resthooks.io/"/><meta property="og:description" content="All network requests flow through the `fetch()` method, so any transforms needed can simply"/><meta property="og:image" content="https://resthooks.io/img/rest_hooks_logo.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://resthooks.io/img/rest_hooks_logo.png"/><link rel="shortcut icon" href="/img/favicon/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://resthooks.io/blog/atom.xml" title="Rest Hooks Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://resthooks.io/blog/feed.xml" title="Rest Hooks Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-138752992-1', 'auto');
              ga('send', 'pageview');
            </script><link rel="preload" href="/font/Graphik-Regular-Web.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/font/Graphik-RegularItalic-Web.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/font/Graphik-Semibold-Web.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/font/Graphik-SemiboldItalic-Web.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><script type="text/javascript" src="/scripts/sidebarScroll.js"></script><script type="text/javascript" src="/scripts/codeblock.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/prism.css"/><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/rest_hooks_logo.svg" alt="Rest Hooks"/><h2 class="headerTitleWithLogo">Rest Hooks</h2></a><a href="/versions"><h3>4.0</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/4.0/getting-started/installation" target="_self">Getting Started</a></li><li class="siteNavGroupActive"><a href="/docs/4.0/api/README" target="_self">API</a></li><li class="siteNavGroupActive"><a href="/docs/4.0/guides/resource-types" target="_self">Resource Definitions</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><li class=""><a href="https://www.github.com/coinbase/rest-hooks" target="_self">Github</a></li><li class=""><a href="https://codesandbox.io/s/rest-hooks-hinux?fontsize=14&amp;module=%2Fsrc%2Fpages%2FIssueList.tsx" target="_self">üéÆ Demo</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>‚Ä∫</i><span>Network Interface</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Getting Started<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/4.0/getting-started/installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/getting-started/usage">Usage</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/guides/loading-state">Handling loading state</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/guides/network-errors">Dealing with network errors</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/guides/fetch-multiple">Fetching multiple resources at once</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Resource Definitions<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/4.0/guides/resource-types">Resource types</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Network Interface</h4><ul><li class="navListItem"><a class="navItem" href="/docs/4.0/guides/url">URL Patterns</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/guides/endpoints">Custom endpoints</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/guides/pagination">Pagination</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/guides/auth">Authentication</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/4.0/guides/network-transform">Transforming data on fetch</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/guides/mocking-unfinished">Mocking unfinished endpoints</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Entity Interface</h4><ul><li class="navListItem"><a class="navItem" href="/docs/4.0/guides/computed-properties">Computed Properties</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/guides/multi-pk">Multi-column primary key</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Performance Optimizations</h4><ul><li class="navListItem"><a class="navItem" href="/docs/4.0/guides/nested-response">Nesting related resources (server-side join)</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/guides/rpc">Capturing Mutation Side-Effects</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Advanced<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Resource Definitions</h4><ul><li class="navListItem"><a class="navItem" href="/docs/4.0/guides/custom-networking">Custom networking library</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/guides/resource-lifetime">Custom cache lifetime</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Components</h4><ul><li class="navListItem"><a class="navItem" href="/docs/4.0/guides/infinite-scrolling-pagination">Infinite Scrolling</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Testing</h4><ul><li class="navListItem"><a class="navItem" href="/docs/4.0/guides/storybook">Mocking data for Storybook</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/guides/unit-testing-hooks">Unit testing hooks</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/guides/unit-testing-components">Unit testing components</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Performance</h4><ul><li class="navListItem"><a class="navItem" href="/docs/4.0/guides/fetch-then-render">Fetch then Render</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/guides/eager-updates">Eager Updates</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Integrations</h4><ul><li class="navListItem"><a class="navItem" href="/docs/4.0/guides/redux">Redux integration</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Legacy</h4><ul><li class="navListItem"><a class="navItem" href="/docs/4.0/guides/class-components">Usage with class components</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/guides/no-suspense">Usage without Suspense</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">API<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/4.0/api/README">API Reference</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Interface Definitions</h4><ul><li class="navListItem"><a class="navItem" href="/docs/4.0/api/resource">Resource</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/api/SimpleRecord">SimpleRecord</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/api/FetchShape">FetchShape</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Hooks</h4><ul><li class="navListItem"><a class="navItem" href="/docs/4.0/api/useresource">useResource()</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/api/useFetcher">useFetcher()</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/api/useCache">useCache()</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/api/useSubscription">useSubscription()</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/api/useRetrieve">useRetrieve()</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/api/useInvalidator">useInvalidator()</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/api/useResetter">useResetter()</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Components</h4><ul><li class="navListItem"><a class="navItem" href="/docs/4.0/api/CacheProvider">&lt;CacheProvider /&gt;</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/api/ExternalCacheProvider">&lt;ExternalCacheProvider /&gt;</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/api/NetworkErrorBoundary">&lt;NetworkErrorBoundary /&gt;</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Managers</h4><ul><li class="navListItem"><a class="navItem" href="/docs/4.0/api/Manager">Manager</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/api/NetworkManager">NetworkManager</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/api/SubscriptionManager">SubscriptionManager</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/api/PollingSubscription">PollingSubscription</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Testing</h4><ul><li class="navListItem"><a class="navItem" href="/docs/4.0/api/MockProvider">&lt;MockProvider /&gt;</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/api/makeRenderRestHook">makeRenderRestHook()</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/api/makeCacheProvider">makeCacheProvider()</a></li><li class="navListItem"><a class="navItem" href="/docs/4.0/api/makeExternalCacheProvider">makeExternalCacheProvider()</a></li></ul></div></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/coinbase/rest-hooks/edit/master/docs/guides/network-transform.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Transforming data on fetch</h1></header><article><div><span><p>All network requests flow through the <code>fetch()</code> method, so any transforms needed can simply
be done by overriding it with a call to super.</p>
<h2><a class="anchor" aria-hidden="true" id="snakes-to-camels"></a><a href="#snakes-to-camels" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Snakes to camels</h2>
<p>Commonly APIs are designed with keys using <code>snake_case</code>, but many in typescript/javascript
prefer <code>camelCase</code>. This snippet lets us make the transform needed.</p>
<p><code>CamelResource.ts</code></p>
<pre><code class="hljs css language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> camelCase<span class="token punctuation">,</span> snakeCase <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Method<span class="token punctuation">,</span> Resource <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rest-hooks'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">deeplyApplyKeyTransform</span><span class="token punctuation">(</span>obj<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token function-variable function">transform</span><span class="token operator">:</span> <span class="token punctuation">(</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> ret<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>key <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      ret<span class="token punctuation">[</span><span class="token function">transform</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deeplyApplyKeyTransform</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> transform<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      ret<span class="token punctuation">[</span><span class="token function">transform</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// We can now extend CamelResource instead of Resource to build</span>
<span class="token comment">// all of our classes.</span>
<span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">CamelResource</span> <span class="token keyword">extends</span> <span class="token class-name">Resource</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token function">fetch</span><span class="token punctuation">(</span>
    method<span class="token operator">:</span> Method <span class="token operator">=</span> <span class="token string">'get'</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    body<span class="token operator">?</span><span class="token operator">:</span> Readonly<span class="token operator">&lt;</span>object <span class="token operator">|</span> <span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// we'll need to do the inverse operation when sending data back to the server</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>body<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      body <span class="token operator">=</span> <span class="token function">deeplyApplyKeyTransform</span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> snakeCase<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// perform actual network request getting back json</span>
    <span class="token keyword">const</span> jsonResponse <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> body<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// do the conversion!</span>
    <span class="token keyword">return</span> <span class="token function">deeplyApplyKeyTransform</span><span class="token punctuation">(</span>jsonResponse<span class="token punctuation">,</span> camelCase<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="deserializing-fields"></a><a href="#deserializing-fields" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deserializing fields</h2>
<p>In many cases, data sent through JSON is serialized into strings since JSON
only has a few primitive types. Common examples include <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a>
for dates or even strings for decimals that require high precision (<a href="https://floating-point-gui.de/">floats can be lossy</a>).
Keeping data in the serialized form is often fine, especially if it is only being used to
be displayed. However, this can be problematic when derived data is computed like adding time to a date
or multiplying two numbers.</p>
<p>In this case override the <a href="../api/resource#static-fromjst-extends-typeof-resourcethis-t-props-partialabstractinstancetypet-abstractinstancetypet">fromJS()</a>
factory method, transforming the fields you wish to change.</p>
<pre><code class="hljs css language-typescript"><span class="token keyword">class</span> <span class="token class-name">MyResource</span> <span class="token keyword">extends</span> <span class="token class-name">Resource</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> createdAt<span class="token operator">:</span> Date <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> largeNumber <span class="token operator">=</span> <span class="token function">BigInt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// other fields here</span>

  <span class="token comment">/** MyResource factory. Takes an object of properties to assign to MyResource. */</span>
  <span class="token keyword">static</span> <span class="token generic-function"><span class="token function">fromJS</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">typeof</span> Resource<span class="token operator">></span></span></span><span class="token punctuation">(</span>
    <span class="token keyword">this</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span>
    props<span class="token operator">:</span> Partial<span class="token operator">&lt;</span>AbstractInstanceType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">>></span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">fromJS</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token operator">...</span>props<span class="token punctuation">,</span>
      createdAt<span class="token operator">:</span> props<span class="token punctuation">.</span>createdAt <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>createdAt<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      largeNumber<span class="token operator">:</span> <span class="token function">BigInt</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>largeNumber<span class="token punctuation">)</span><span class="token operator">:</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="case-of-the-missing-id"></a><a href="#case-of-the-missing-id" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Case of the missing <code>Id</code></h2>
<p>You now want to interface with a great new streaming site called <code>mystreamsite.tv</code>. It has
a simple API to retireve information about current streams. You can get a stream with the
url pattern <code>https://mystreamsite.tv/[username]/</code>. However, for some reason they don't
return the username in the response body! You want to be able to refer to it and it's
the only uniquely defining identifier for the class.</p>
<p>We can simply parse the username from the request url itself and add that to the
response.</p>
<p><code>GET https://mystreamsite.tv/ntucker/</code></p>
<pre><code class="hljs css language-json"><span class="token punctuation">{</span>
  <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"When I'm Grandmaster, I will play faster."</span><span class="token punctuation">,</span>
  <span class="token property">"game"</span><span class="token operator">:</span> <span class="token string">"Starcraft II"</span><span class="token punctuation">,</span>
  <span class="token property">"current_viewers"</span><span class="token operator">:</span> <span class="token number">1337</span><span class="token punctuation">,</span>
  <span class="token property">"live"</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre>
<p><code>StreamResource.ts</code></p>
<pre><code class="hljs css language-typescript"><span class="token keyword">const</span> <span class="token constant">USERNAME_MATCHER</span> <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.*\/([^\/]+)\/?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>

<span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">StreamResource</span> <span class="token keyword">extends</span> <span class="token class-name">CamelResource</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> username<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> title<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> game<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> currentViewers<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> live<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token function">pk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>username<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token generic-function"><span class="token function">detailShape</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">typeof</span> Resource<span class="token operator">></span></span></span><span class="token punctuation">(</span>
    <span class="token keyword">this</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token operator">:</span> ReadShape<span class="token operator">&lt;</span>SchemaDetail<span class="token operator">&lt;</span>AbstractInstanceType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">>></span><span class="token punctuation">,</span> <span class="token punctuation">{</span> username<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> superShape <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">detailShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>superShape<span class="token punctuation">,</span>
      <span class="token function-variable function">fetch</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>params<span class="token operator">:</span> <span class="token punctuation">{</span> username<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> body<span class="token operator">?</span><span class="token operator">:</span> Readonly<span class="token operator">&lt;</span>object <span class="token operator">|</span> <span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> superShape<span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span>params<span class="token punctuation">,</span> body<span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span>username <span class="token operator">=</span> params<span class="token punctuation">.</span>username<span class="token punctuation">;</span>
        <span class="token keyword">return</span> response<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="using-http-headers"></a><a href="#using-http-headers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using HTTP Headers</h2>
<p>HTTP <a href="https://developer.mozilla.org/en-US/docs/Web/API/Headers">Headers</a> are accessible in the fetch
<a href="https://developer.mozilla.org/en-US/docs/Web/API/Response">Response</a>. <a href="../api/resource#static-fetchresponsemethod-get--post--put--patch--delete--options-url-string-body-readonlyobject--string--promiseresponse">Resource.fetchResponse()</a>
can be used to construct <a href="../api/FetchShape#fetchparams-param-body-payload-promiseany">FetchShape.fetch()</a>.</p>
<p>Sometimes this is used for cursor based <a href="/docs/4.0/guides/pagination#tokens-in-http-headers">pagination</a>.</p>
<pre><code class="hljs css language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> Resource <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rest-hooks'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">ArticleResource</span> <span class="token keyword">extends</span> <span class="token class-name">Resource</span> <span class="token punctuation">{</span>
  <span class="token comment">// same as above....</span>

  <span class="token comment">/** Shape to get a list of entities */</span>
  <span class="token keyword">static</span> <span class="token generic-function"><span class="token function">listShape</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">typeof</span> Resource<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">fetch</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>params<span class="token operator">:</span> Readonly<span class="token operator">&lt;</span>Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token operator">>></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchResponse</span><span class="token punctuation">(</span><span class="token string">'get'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">listUrl</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        link<span class="token operator">:</span> response<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'link'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        results<span class="token operator">:</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          error<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token number">400</span><span class="token punctuation">;</span>
          <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">listShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      fetch<span class="token punctuation">,</span>
      schema<span class="token operator">:</span> <span class="token punctuation">{</span> results<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getEntitySchema</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> link<span class="token operator">:</span> <span class="token string">''</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="name-calling"></a><a href="#name-calling" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Name calling</h2>
<p>Sometimes an API might change a key name, or choose one you don't like. Of course
you have much better naming standards, so instead of your <code>Resource</code> class definition
and all your code, you just want to remap that key.</p>
<p><code>ArticleResource.ts</code></p>
<pre><code class="hljs css language-typescript"><span class="token comment">// We're using camelCase now as well ;)</span>
<span class="token keyword">class</span> <span class="token class-name">ArticleResource</span> <span class="token keyword">extends</span> <span class="token class-name">CamelResource</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> id<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> title<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> carrotsUsed<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token function">fetch</span><span class="token punctuation">(</span>
    method<span class="token operator">:</span> Method <span class="token operator">=</span> <span class="token string">'get'</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    body<span class="token operator">?</span><span class="token operator">:</span> Readonly<span class="token operator">&lt;</span>object <span class="token operator">|</span> <span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// we'll need to do the inverse operation when sending data back to the server</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>body <span class="token operator">&amp;&amp;</span> <span class="token string">'carrotsUsed'</span> <span class="token keyword">in</span> body<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// caller should manage body, so we don't want to modify it</span>
      body <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>body <span class="token punctuation">}</span><span class="token punctuation">;</span>
      body<span class="token punctuation">.</span>carrotsUsedIsThisNameTooLong <span class="token operator">=</span> body<span class="token punctuation">.</span>carrotsUsed<span class="token punctuation">;</span>
      <span class="token keyword">delete</span> body<span class="token punctuation">.</span>carrotsUsed<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// perform actual network request getting back json</span>
    <span class="token keyword">const</span> jsonResponse <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> body<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// only replace the name if it exists. This also helps us ignore list responses.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'carrotsUsedIsThisNameTooLong'</span> <span class="token keyword">in</span> jsonResponse<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ok to mutate jsonResponse since we control it</span>
      jsonResponse<span class="token punctuation">.</span>carrotsUsed <span class="token operator">=</span> jsonResponse<span class="token punctuation">.</span>carrotsUsedIsThisNameTooLong<span class="token punctuation">;</span>
      <span class="token keyword">delete</span> jsonResponse<span class="token punctuation">.</span>carrotsUsedIsThisNameTooLong<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> jsonResponse<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/4.0/guides/auth"><span class="arrow-prev">‚Üê </span><span>Authentication</span></a><a class="docs-next button" href="/docs/4.0/guides/mocking-unfinished"><span>Mocking unfinished endpoints</span><span class="arrow-next"> ‚Üí</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#snakes-to-camels">Snakes to camels</a></li><li><a href="#deserializing-fields">Deserializing fields</a></li><li><a href="#case-of-the-missing-id">Case of the missing <code>Id</code></a></li><li><a href="#using-http-headers">Using HTTP Headers</a></li><li><a href="#name-calling">Name calling</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/rest_hooks_logo.svg" alt="Rest Hooks" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/getting-started/installation">Getting Started</a><a href="/docs/guides/resource-types">Resource Definitions</a><a href="/docs/api/README">API Reference</a></div><div><h5>Community</h5><a href="/users.html">User Showcase</a><a href="http://stackoverflow.com/questions/tagged/rest-hooks" target="_blank" rel="noreferrer noopener">Stack Overflow</a></div><div><h5>More</h5><a href="https://github.com/coinbase/rest-hooks">GitHub</a><a class="github-button" href="https://github.com/coinbase/rest-hooks" data-icon="octicon-star" data-count-href="/coinbase/rest-hooks/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a><a href="https://discord.gg/35nb8Mz"><img src="https://img.shields.io/discord/768254430381735967.svg?style=flat-square&amp;colorB=758ED3" alt="Chat"/></a></div></section><section class="copyright">Copyright ¬© 2021 Coinbase<br/>Some icons copyright Font Awesome and Noun Project (Hassan ali, ProSymbols)</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '52e661c10738fd114bcf68d537358c16',
                indexName: 'coinbase-rest-hooks',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["version:4.0"]}
              });
            </script></body></html>